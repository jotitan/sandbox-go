<html>

<head>
    <script src="../vendors/jquery/jquery-2.1.3.min.js"></script>
    <script src="../vendors/jquery/jquery-ui.min.js"></script>
    <script src="../vendors/punch/jquery.ui.touch-punch.min.js"></script>
    <link rel="stylesheet" href="../vendors/jquery/jquery-ui.min.css"/>
    <link rel="stylesheet" href="../vendors/bootstrap/css/bootstrap.min.css">
</head>
<body>



<div class="navbar navbar-inverse navbar-fixed-top navbar-md" role="navigation">
    <div class="container" style="margin-left:0px;">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand glyphicon glyphicon-search" style="cursor:pointer">
                Prestataires PRS
            </span>

        </div>

        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Options futures <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#" onclick="TasksPanel.open()">
                            <span class="glyphicon glyphicon-list-alt"></span>
                            Search...</a>
                        </li>
                        <li><a href="#" onclick="PlaylistPanel.open()">
                            <span class="glyphicon glyphicon-music"></span>
                            Playlist...</a>
                        </li>
                        <li><a href="#" onclick="Explorer.byArtist()">
                            <span class="glyphicon glyphicon-user"></span>
                            List by artist...</a>
                        </li>
                        <li><a href="#" onclick="Explorer.byAlbum()">
                            <span class="glyphicon glyphicon-signal"></span>
                            List by artist and album...</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div style="display:none">

<div style="margin-left:20px;margin-bottom:100px;float:left;margin-right:50px">
    <span style="display:inline-block;border:solid 1px black;padding-left:5px;padding-right:10px;background-color:lightblue">
        <input type="checkbox" style="margin-right:5px"/> Garage
        <span class="glyphicon glyphicon-triangle-bottom"></span>
    </span>
</div>

<div style="float:left;margin-right:30px;">=></div>

<div style="margin-left:20px;margin-bottom:100px;float:left;">
    <span style="display:inline-block;border:solid 1px black;padding-left:5px;padding-right:10px;background-color:lightgreen">
        <input checked type="checkbox" style="margin-right:5px"/> Garage
        <span class="glyphicon glyphicon-triangle-bottom"></span>
    </span>
</div>



<div style="margin-bottom:100px;clear:both">
    <span style="margin-left:150px;display:inline-block;border:solid 1px black;padding-left:5px;padding-right:10px;background-color:lightblue">
        <input type="checkbox" style="margin-right:5px"/> Garage
        <span class="glyphicon glyphicon-triangle-top"></span>
    </span>

    <div style="background-color:#c1e8f4;margin-left:20px;margin-top:-1px;width:400px;border:solid 1px black">
        <div style="border-right:solid 1px black;float:left;width:199px;padding-left:10px">
            <span style="border-bottom:solid 1px black"><input type="checkbox" style="margin-right:10px"/>Sous type</span>
            <div style="clear:both">
                <div><input type="checkbox" style="margin-right:10px;"/>R&eacute;paration &eacute;lectrique</div>
                <div><input type="checkbox" checked style="margin-right:10px;"/>R&eacute;paration hydraulique</div>
                <div><input type="checkbox" style="margin-right:10px;"/>R&eacute;paration m&eacute;canique</div>
                <div><input type="checkbox" style="margin-right:10px;"/>Pare-Brise</div>
                <div><input type="checkbox" style="margin-right:10px;"/>Di&eacute;seliste (banc)</div>
                <div><input type="checkbox" checked style="margin-right:10px;"/>Freinage (banc)</div>
                <div><input type="checkbox" style="margin-right:10px;"/>Frigo</div>
            </div>
        </div>
        <div style="float:right;width:199px;padding-right:10px">
            <div style="float:right;border-bottom:solid 1px black">Marque <input type="checkbox" style="margin-left:10px"/></div>
            <div style="padding-left:5px;clear:both">
                <div style="text-align:right">AUTOSUR<input type="checkbox" style="margin-left:10px;"/></div>
                <div style="text-align:right">DAF<input type="checkbox" checked style="margin-left:10px;"/></div>
                <div style="text-align:right">FORD<input type="checkbox" checked style="margin-left:10px;"/></div>
                <div style="text-align:right">RENAULT<input type="checkbox" style="margin-left:10px;"/></div>
                <div style="text-align:right">TOYOTA<input type="checkbox" checked style="margin-left:10px;"/></div>
                <div style="text-align:right">VOLVO<input type="checkbox" style="margin-left:10px;"/></div>
            </div>
        </div>
        <div style="clear:both"></div>
        <div style="text-align:center">Fermer</div>
    </div>
</div>


<div style="margin-left:20px;margin-bottom:100px">
    <div style="border:solid 1px black;padding-left:5px;padding-right:10px;background-color:lightgreen;width:200px">
        <input type="checkbox" style="margin-right:5px"/> Garage
        <span class="glyphicon glyphicon-triangle-bottom" style="float:right;padding-top:4px"></span>
    </div>
    <div style="border:solid 1px black;padding-left:5px;padding-right:10px;background-color:#a7ffa7;width:200px">
        R&eacute;paration hydraulique, Freinage (banc)
    </div>
    <div style="border:solid 1px black;padding-left:5px;padding-right:10px;background-color:#a7ffa7;width:200px">
        DAF, FORD, TOYOTA
    </div>

</div>

</div>

<style>

    .special-bloc {
        float:left;
    }

    .special-bloc {
        margin-left:10px;
        display:inline-block;
        width:150px;
        padding:0px 5px 0px 5px ;
        background-color:lightblue;
    }

    .special-bloc .glyphicon {
    float:right;
    padding-top:3px;
    cursor:pointer;
    }

    .detailBloc {
    background-color:#d5eef6;
    display:none;
    position:absolute;
    border:solid 1px black;
    z-index:1;
    }

    .detailBloc hr {
        border-color:darkgray;
    }

    .left {
    float:left;
    padding-left:5px;
    padding-right:30px;
    }

    .left input[type="checkbox"] {
    margin-right:5px;
    float:left;
    }

    .right input[type="checkbox"] {
    margin-left:5px;
    float:right;
    }

    .right {
    float:right;
    padding-right:5px;
    padding-left:30px;
    text-align:right;
    }

    .selected-types,.selected-marques {
    font-size:10px;
    border-top:solid 1px darkgray;
    }

    label {font-weight:normal;}

</style>

<div style="margin-top:80px;width:1200px;">

<div style="padding-left:10px">
    Adresse : <input type="text" size="70" id="searchField"/> dans un rayon de 5 kms :   1
    <div id="slider" style="display:inline-block;width:100px"></div> 200 kms
    <input type="submit" value="Rechercher" onclick="switchBloc()"/>
</div>

<div style="width:100%;padding-top:10px;">

<div class="special-bloc loueur">
    <div>
        <input type="checkbox"/> Loueur
        <span class="glyphicon glyphicon-triangle-bottom"></span>
    </div>
</div>


<div class="special-bloc garage">
    <div>
        <input type="checkbox"/> Garage
        <span class="glyphicon glyphicon-triangle-bottom"></span>
    </div>
</div>


    <div class="special-bloc controle">
        <div>
            <input type="checkbox"/> Contr&ocirc;le
            <span class="glyphicon glyphicon-triangle-bottom"></span>
        </div>
    </div>

    <div class="special-bloc pneu">
        <div>
            <input type="checkbox"/> Pneu
            <span class="glyphicon glyphicon-triangle-bottom"></span>
        </div>
    </div>

    <div class="special-bloc depannage">
        <div>
                <input type="checkbox"/> D&eacute;pannage
            <span class="glyphicon glyphicon-triangle-bottom"></span>
        </div>
    </div>

    <div class="special-bloc">
        <div>
            <input type="checkbox"/> Type
            <span class="glyphicon glyphicon-triangle-bottom"></span>
        </div>
    </div>

    <div style="float:left">
        <input type="checkbox" style="margin:0px 5px 0px 5px" class="all_select"/>Tous
    </div>

</div>
<div style="clear:both;margin-bottom:10px;margin-top:30px;">
    <div style="width:48%;float:left;margin-left:5px;border:solid 1px lightgray;height:500px;" id="map">

    </div>
    <div style="width:48%;float:right;margin-left:10px;margin-right:25px;padding:10px;border:solid 1px lightgray;height:500px;overflow:auto;display:none" class="detail">
        <h3 style="text-align:left;margin-top:5px"><img src="camion.png" style="margin-right:5px"/>Garage de l'&eacute;tang (12543)
        <span class="glyphicon glyphicon-remove-circle close" onclick="switchBloc()" style="float:right;padding-right:10px"></span>
        </h3>
        <hr style="margin:5px;"/>
        <h4>Adresse</h4>
        <span style="display:inline-block;width:120px">Rue / Num&eacute;ro</span>
        <span style="display:inline-block;width:calc(100% - 195px);background-color:lightgray;margin-top:5px;padding-left:5px;">AVENUE DE LA MOTTE-PICQUET</span>
        <span style="display:inline-block;width:50px;background-color:lightgray;margin-top:5px;padding-left:5px;">12</span><br/>
        <span style="display:inline-block;width:120px">Code postal / Ville</span>
        <span style="display:inline-block;width:100px;background-color:lightgray;margin-top:5px;padding-left:5px;">75015</span>
        <span style="display:inline-block;width:calc(100% - 245px);background-color:lightgray;margin-top:5px;padding-left:5px;">PARIS</span><br/>

        <h4>Caract&eacute;ristiques</h4>
        <span style="display:inline-block;width:120px">Type</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">R&eacute;seau constructeur</span><br/>
        <span style="display:inline-block;width:120px">Marque</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">Renault</span><br/>
        <span style="display:inline-block;width:120px">Activit&eacute;(s)</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">D&eacute;panneur</span><br/>
        <span style="display:inline-block;width:120px">Chiffre d'affaires</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">12.000 &euro;</span><br/>

        <h4>Contact</h4>
        <span style="display:inline-block;width:120px">T&eacute;l&eacute;phone</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">01.45.34.65.43</span><br/>
        <span style="display:inline-block;width:120px">Portable</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">06.45.34.65.43</span><br/>
        <span style="display:inline-block;width:120px">T&eacute;l&eacute;copie</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">01.45.34.65.44</span><br/>
        <span style="display:inline-block;width:120px">Email</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;">garage@dr.com</span><br/>
        <span style="display:inline-block;width:120px">Site web</span>
        <span style="display:inline-block;width:calc(100% - 140px);background-color:lightgray;margin-top:5px;padding-left:5px;"><a href="#">http://www.garage.fr</a></span><br/>
    </div>
    <div style="width:48%;float:right;margin-left:10px;margin-right:25px;padding:10px;border:solid 1px lightgray;height:500px;overflow:auto;display:" class="list">
        <h2>Liste des prestataires</h2>
        <hr/>
        <div>
            <img src="camion.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage de l'&eacute;tang</span>
            <span style="float:right;padding-right:30px;cursor:pointer"><a onclick="switchBloc()">D&eacute;tail</a></span>
            <br/>
            12 rue de la Motte-Picquet, Paris - 01.64.76.56.45<br/>
            Type :  D&eacute;panneur
        </div>
        <hr/>
        <div>
            <img src="pneu.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage du rond point</span>
            <span style="float:right;padding-right:30px;"><a>D&eacute;tail</a></span>
            <br/>
            6 rue des Capucines, Paris - 01.24.76.56.45<br/>
            Type : Pneu
        </div>
        <hr/>
        <div>
            <img src="cle.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage du quai</span>
            <span style="float:right;padding-right:30px;"><a>D&eacute;tail</a></span>
            <br/>
            173 quai de Jemmapes, Paris - 01.64.33.56.45<br/>
            Type : Garage
        </div>
        <hr/>
        <div>
            <img src="camionmixte.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage du centre</span>
            <span style="float:right;padding-right:30px;"><a>D&eacute;tail</a></span>
            <br/>
            13 rue du Centre, Paris - 01.64.55.66.45<br/>
            Type : D&eacute;panneur, Pneu
        </div>
        <hr/>
        <div>
            <img src="cle.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage Picsou</span>
            <span style="float:right;padding-right:30px;"><a>D&eacute;tail</a></span>
            <br/>
            6 rue f&eacute;tiche, Paris - 01.32.23.13.45<br/>
            Type : Garage
        </div>
        <hr/>
        <div>
            <img src="camionmixte.png" style="margin-right:5px;"/>
            <span style="font-weight:bold">Garage Gontran</span>
            <span style="float:right;padding-right:30px;"><a>D&eacute;tail</a></span>
            <br/>
            8 rue de la chance, Paris - 01.64.22.11.11<br/>
            Type : D&eacute;panneur, Pneu
        </div>
        <hr/>
    </div>

</div>
</div>

<div class="detailBloc" id="templateCritere">
    <div class="left" style="border-right:solid 1px lightgray">
        <div style="font-weight:bold"><input type="checkbox" class="global_chk"/>Type</div>
        <hr style="margin:5px 0px 5px 0px"/>
        <div class="data types"></div>
    </div>
    <div class="right">
        <div style="font-weight:bold">Marque<input type="checkbox" class="global_chk"/></div>
        <hr style="margin:5px 0px 5px 0px"/>
        <div class="data marques"></div>
    </div>
    <div style="text-align:right;clear:both;cursor:pointer;font-size:10px;padding:5px 10px 0px 0px" class="close_detail">Fermer</div>
</div>


<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCf0e7TC34X6EzkpsvtKyuqebjiosrzwak&sensor=false&libraries=places" type="text/javascript"></script>

<script>
$('#slider').slider({value:30})

var map = new google.maps.Map(document.getElementById('map'), {
zoom: 11,
streetViewControl:false,
center: {lng:2.3,lat:48.85}
});

var autocomplete = new google.maps.places.Autocomplete($('#searchField').get(0));

var m = new google.maps.Marker({position:{lng:2.3,lat:48.85},map:map,title:'ok',icon:'camion.png'})
new google.maps.Marker({position:{lng:2.35,lat:48.90},map:map,title:'ok',icon:'cle.png'})
new google.maps.Marker({position:{lng:2.38,lat:48.87},map:map,title:'ok',icon:'camion.png'})
new google.maps.Marker({position:{lng:2.28,lat:48.88},map:map,title:'ok',icon:'pneu.png'})
new google.maps.Marker({position:{lng:2.33,lat:48.82},map:map,title:'ok',icon:'cle.png'})
new google.maps.Marker({position:{lng:2.36,lat:48.84},map:map,title:'ok',icon:'camionmixte.png'})
new google.maps.Marker({position:{lng:2.42,lat:48.85},map:map,title:'ok',icon:'pneu.png'})

m.addListener('click', function() {
    var i = new google.maps.InfoWindow({
        content: '<div id="content">'+
      '<div id="siteNotice">'+
      '</div>'+
      '<h4 id="firstHeading" class="firstHeading">Garage de l\'&eacute;tang</h4>'+
      '<hr style="margin:0px;margin-bottom:5px;"/><div id="bodyContent">'+
      '<p><b>D&eacute;panneur</b>, Renault</p>'+
      '</div>'+
      '</div>'
    });
    i.open(map, m);
});


function switchBloc(){
    if ($('.detail').is(':visible')){
        $('.detail').hide()
        $('.list').show()
    }else{
        $('.detail').show()
        $('.list').hide()
    }
}

 function Critere(){
        this.div = null;
        this.detail = null;
        this.init = function(selector){
            var _self = this;
            this.div = $(selector)
            this.detail = $('#templateCritere').clone()
            $('.close_detail',this.detail).bind('click',function(){
                _self.hide();
            })
            $('.global_chk',this.detail).bind('click',function(){
                $(':checkbox',$(this).parent().parent()).prop('checked',$(this).is(':checked'));
            })
            this.div.append(this.detail);
            $('.glyphicon-triangle-bottom',this.div).bind('click',function(){
                _self.toggle();
            } ) ;
            this.div.append('<div class="selected-types"></div>')
            this.div.append('<div class="selected-marques"></div>')
            return this;
        }
        this.toggle = function(){
            if(this.detail.is(':visible')){
                this.hide();
            }else{
                this.show();
            }
        }
        this.show = function(){
            this.detail.show('');
            $('.glyphicon-triangle-bottom',this.div).removeClass('glyphicon-triangle-bottom').addClass('glyphicon-triangle-top');
        }
        this.hide = function(){
            this.detail.hide();
            // Display selected data
            this.displaySelected();
            $('.glyphicon-triangle-top',this.div).removeClass('glyphicon-triangle-top').addClass('glyphicon-triangle-bottom');
        }
        this.getSelected = function(){
            var results = ["",""];
            results[0] = $('.data.types :checkbox:checked',this.div).toArray().reduce(function(cc,val,idx){
                return cc + (idx == 0 ?  "":", ") + $(val).val()
            },"");
            results[1] = $('.data.marques :checkbox:checked',this.div).toArray().reduce(function(cc,val,idx){
                return cc + (idx == 0 ?  "":", ") + $(val).val()
            },"");
            return results;
        }
        this.displaySelected = function(){
            var selected = this.getSelected();
            $('.selected-types',this.div).html(selected[0]);
            $('.selected-marques',this.div).html(selected[1]);
        }
        this.load = function(types,marques){
            $('.data',this.detail).empty()
            types.forEach(function(t){
                $('.data.types',this.detail).append('<div><label><input type="checkbox" value="' + t + '"/>' + t + '</label></div>');
            },this);
            marques.forEach(function(t){
                $('.data.marques',this.detail).append('<div><label><input type="checkbox" value="' + t + '"/>' + t + '</label></div>');
            },this);
        }
    }

    $('.all_select').bind('click',function(){
          $('.special-bloc > >:checkbox').prop('checked',$(this).is(':checked'))
    });

   var types = [
     ["R&eacute;paration &eacute;lectrique","R&eacute;paration hydraulique","R&eacute;paration m&eacute;canique","Pare-Brise","Di&eacute;seliste (banc)","Freinage (banc)","Frigo","Lavage PL"],
     ["marques r&eacute;seaux"],
     ["VI","VUL","TP"],
     ["Chronotachygraphe","Citerne","Elevation atelier","Elevation site","Extincteur atelier","Extincteur site","CT PL","CT VL","Volucompteur site","Volucompteur atelier"],
     ["D&eacute;pannage","D&eacute;pannage Sous trait&eacute;","Remorquage","Remorquage sous trait&eacute;"],
   ];
   var marques = ["AUTOSUR","DAF","FORD","CARGLASS","RENAULT","VOLVO","TOYOTA"];
   new Critere().init('.special-bloc.garage').load(types[0],marques);
   new Critere().init('.special-bloc.pneu').load(types[1],marques);
   new Critere().init('.special-bloc.loueur').load(types[2],marques);
   new Critere().init('.special-bloc.controle').load(types[3],marques);
   new Critere().init('.special-bloc.depannage').load(types[4],marques);



</script>


</body>
</html>